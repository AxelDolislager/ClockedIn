<!DOCTYPE html>
<html>
    <% include ../partials/head %>
    <body class="startbackground">
        <div class="wrapper">
        <img class="logo" src="./images/logo.svg" alt="ProjectManagerApp">
        <form id="login_form" method="POST">
            <div class="form_box">
                <input type="email" placeholder="Email" name="login_email">
                <hr>
                <input type="password" placeholder="Password" name="login_password">
            </div>
        </form>
        <button type="submit" form="login_form" value="sign in">Sign in</button>
        </div>
        <div class="bottomaction">
            <a href="./register">
                <p>New on <b>ProjectManagerApp</b>?<br>
                Create a new account here!</p>
                <i class="fal fa-angle-right fa-3x"></i>
            </a>
        </div>
        <% include ../partials/footer %>
        <script>
            $('form#login_form').submit(function(e){
                e.preventDefault();
                var email = $("input[name=login_email]").val();
                var password = $("input[name=login_password]").val();
                
                console.log("Login attempt!");
                firebase.auth().signInWithEmailAndPassword(email, password)
                .then(function(data){
                    window.location = "/dashboard";
                })
                .catch(function(error) {
                    console.log(error);
                });
            });
            firebase.auth().onAuthStateChanged(function(user) {
                if (user) {
                    window.location = "/dashboard";
                }
            });
        </script>
    </body>
</html>